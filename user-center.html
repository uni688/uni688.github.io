<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸ªäººä¸­å¿ƒ - AI English Learning</title>

  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#667eea">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/icons/icon.png" type="image/png">

  <link rel="stylesheet" href="css/style.css">
  <!-- PJAX å¹³æ»‘é¡µé¢åˆ‡æ¢ - å·²æš‚åœ -->
  <!-- <script src="js/pjax.js"></script> -->
  <style>
    .container {
      max-width: 1000px;
    }

    .profile-header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 2rem;
      border-radius: var(--border-radius);
      margin-bottom: 2rem;
      text-align: center;
    }

    .profile-avatar {
      width: 100px;
      height: 100px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      margin: 0 auto 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .profile-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .stat-card {
      background: white;
      padding: 1.5rem;
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      border: 1px solid #e2e8f0;
      text-align: center;
    }

    .stat-card-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .stat-card-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0.5rem 0;
    }

    .stat-card-label {
      color: #64748b;
      font-size: 0.9rem;
    }

    .exp-bar {
      background: rgba(255, 255, 255, 0.3);
      height: 20px;
      border-radius: 1rem;
      overflow: hidden;
      margin-top: 1rem;
    }

    .exp-fill {
      height: 100%;
      background: white;
      transition: width 0.3s ease;
      border-radius: 1rem;
    }

    .exp-text {
      text-align: center;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }

    .section {
      background: white;
      padding: 2rem;
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      margin-bottom: 2rem;
      border: 1px solid #e2e8f0;
    }

    .section-title {
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1rem;
    }

    .achievement-card {
      background: #f8fafc;
      padding: 1.5rem;
      border-radius: var(--border-radius-sm);
      border: 2px solid #e2e8f0;
      transition: all 0.2s;
    }

    .achievement-card.unlocked {
      border-color: var(--primary);
      background: linear-gradient(135deg, #f0f4ff, #e0e7ff);
    }

    .achievement-card.locked {
      opacity: 0.6;
      filter: grayscale(0.5);
    }

    .achievement-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .achievement-name {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.25rem;
    }

    .achievement-desc {
      font-size: 0.85rem;
      color: #64748b;
      margin-bottom: 0.5rem;
    }

    .achievement-reward {
      font-size: 0.9rem;
      color: #10b981;
      font-weight: 600;
    }

    .chart-container {
      margin-top: 1rem;
      padding: 1rem;
      background: #f8fafc;
      border-radius: var(--border-radius-sm);
    }

    .vocabulary-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .vocab-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background: #f8fafc;
      border-radius: var(--border-radius-sm);
      border: 1px solid #e2e8f0;
    }

    .vocab-info {
      flex: 1;
    }

    .vocab-name {
      font-weight: 600;
      color: var(--primary);
    }

    .vocab-stats {
      font-size: 0.85rem;
      color: #64748b;
      margin-top: 0.25rem;
    }

    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }

    /* å›¾è¡¨æ ·å¼ */
    .chart-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid #e2e8f0;
    }

    .chart-tab-btn {
      padding: 0.75rem 1.5rem;
      border: none;
      background: transparent;
      color: #64748b;
      font-weight: 600;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .chart-tab-btn:hover {
      color: var(--primary);
      background: rgba(99, 102, 241, 0.05);
    }

    .chart-tab-btn.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .chart-container {
      min-height: 300px;
    }

    /* æŸ±çŠ¶å›¾ */
    .bar-chart {
      display: flex;
      align-items: flex-end;
      justify-content: space-around;
      height: 250px;
      padding: 1rem;
      border-bottom: 2px solid #e2e8f0;
      gap: 0.5rem;
    }

    .bar-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .bar {
      width: 100%;
      max-width: 60px;
      background: linear-gradient(180deg, var(--primary), var(--secondary));
      border-radius: 8px 8px 0 0;
      position: relative;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .bar:hover {
      opacity: 0.8;
      transform: translateY(-5px);
    }

    .bar-value {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-weight: 700;
      color: var(--primary);
      font-size: 0.9rem;
    }

    .bar-label {
      font-size: 0.8rem;
      color: #64748b;
      text-align: center;
    }

    /* æŠ˜çº¿å›¾ */
    .line-chart {
      position: relative;
      height: 250px;
      padding: 1rem;
    }

    .line-chart svg {
      width: 100%;
      height: 100%;
    }

    .line-path {
      fill: none;
      stroke: var(--primary);
      stroke-width: 3;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .line-point {
      fill: var(--primary);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .line-point:hover {
      r: 8;
      fill: var(--secondary);
    }

    .line-grid {
      stroke: #e2e8f0;
      stroke-width: 1;
      stroke-dasharray: 5, 5;
    }

    .line-label {
      font-size: 12px;
      fill: #64748b;
    }

    /* é¥¼å›¾ */
    .pie-chart-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      padding: 2rem;
      flex-wrap: wrap;
    }

    #wordsPieChart {
      max-width: 250px;
      height: auto;
    }

    .pie-legend {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .pie-legend-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 0.9rem;
    }

    .pie-legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }

    .pie-legend-label {
      color: #475569;
      font-weight: 500;
    }

    .pie-legend-value {
      color: #64748b;
      margin-left: auto;
    }

    @media (max-width: 768px) {
      .profile-stats {
        grid-template-columns: 1fr 1fr;
      }

      .achievements-grid {
        grid-template-columns: 1fr;
      }

      .bar-chart {
        padding: 0.5rem;
        gap: 0.25rem;
      }

      .bar {
        max-width: 40px;
      }

      .chart-tab-btn {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
      }

      .pie-chart-container {
        flex-direction: column;
        gap: 1.5rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ‘¤ ä¸ªäººä¸­å¿ƒ</h1>
      <p>æŸ¥çœ‹ä½ çš„å­¦ä¹ è¿›åº¦å’Œæˆå°±</p>
    </div>

    <!-- ç”¨æˆ·æ¡£æ¡ˆå¤´éƒ¨ -->
    <div class="profile-header">
      <div class="profile-avatar">ğŸ“</div>
      <h2 id="userName">è‹±è¯­å­¦ä¹ è€…</h2>
      <p>ç­‰çº§ <span id="userLevel">1</span> | å·²å­¦ä¹  <span id="joinDays">0</span> å¤©</p>

      <div class="exp-bar">
        <div class="exp-fill" id="expFill" style="width: 0%"></div>
      </div>
      <div class="exp-text">
        ç»éªŒå€¼ï¼š<span id="currentExp">0</span> / <span id="nextLevelExp">100</span>
      </div>
    </div>

    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <div class="profile-stats">
      <div class="stat-card">
        <div class="stat-card-icon">ğŸ’°</div>
        <div class="stat-card-value" id="totalCoins">0</div>
        <div class="stat-card-label">é‡‘å¸ä½™é¢</div>
      </div>

      <div class="stat-card">
        <div class="stat-card-icon">ğŸ”¥</div>
        <div class="stat-card-value" id="currentStreak">0</div>
        <div class="stat-card-label">è¿ç»­å­¦ä¹ å¤©æ•°</div>
      </div>

      <div class="stat-card">
        <div class="stat-card-icon">ğŸ“š</div>
        <div class="stat-card-value" id="totalWords">0</div>
        <div class="stat-card-label">ç´¯è®¡å­¦ä¹ å•è¯</div>
      </div>

      <div class="stat-card">
        <div class="stat-card-icon">â±ï¸</div>
        <div class="stat-card-value" id="totalTime">0</div>
        <div class="stat-card-label">å­¦ä¹ æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</div>
      </div>
    </div>

    <!-- æˆå°±ç³»ç»Ÿ -->
    <div class="section">
      <div class="section-title">
        <span>ğŸ†</span>
        <span>æˆ‘çš„æˆå°±</span>
      </div>
      <div class="achievements-grid" id="achievementsContainer">
        <!-- æˆå°±å¡ç‰‡å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>

    <!-- è¯åº“ç»Ÿè®¡ -->
    <div class="section">
      <div class="section-title">
        <span>ğŸ“–</span>
        <span>è¯åº“ç»Ÿè®¡</span>
      </div>
      <div class="vocabulary-list" id="vocabularyList">
        <!-- è¯åº“åˆ—è¡¨å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>

    <!-- å­¦ä¹ æ•°æ®å›¾è¡¨ -->
    <div class="section">
      <div class="section-title">
        <span>ğŸ“Š</span>
        <span>å­¦ä¹ è¶‹åŠ¿</span>
      </div>

      <!-- å›¾è¡¨é€‰é¡¹å¡ -->
      <div class="chart-tabs"
        style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 2px solid #e2e8f0;">
        <button class="chart-tab-btn active" onclick="showChart('daily')" data-chart="daily">
          ğŸ“… æ¯æ—¥ç»ƒä¹ 
        </button>
        <button class="chart-tab-btn" onclick="showChart('accuracy')" data-chart="accuracy">
          ğŸ¯ æ­£ç¡®ç‡
        </button>
        <button class="chart-tab-btn" onclick="showChart('words')" data-chart="words">
          ğŸ“š å•è¯æŒæ¡
        </button>
      </div>

      <!-- æ¯æ—¥ç»ƒä¹ å›¾è¡¨ -->
      <div class="chart-container" id="dailyChart">
        <h4 style="text-align: center; color: #64748b; margin-bottom: 1rem;">è¿‘7å¤©ç»ƒä¹ æ¬¡æ•°</h4>
        <div class="bar-chart" id="dailyBarChart"></div>
      </div>

      <!-- æ­£ç¡®ç‡å›¾è¡¨ -->
      <div class="chart-container" id="accuracyChart" style="display: none;">
        <h4 style="text-align: center; color: #64748b; margin-bottom: 1rem;">è¿‘7å¤©æ­£ç¡®ç‡è¶‹åŠ¿</h4>
        <div class="line-chart" id="accuracyLineChart"></div>
      </div>

      <!-- å•è¯æŒæ¡å›¾è¡¨ -->
      <div class="chart-container" id="wordsChart" style="display: none;">
        <h4 style="text-align: center; color: #64748b; margin-bottom: 1rem;">å„æ¨¡å¼ç»ƒä¹ åˆ†å¸ƒ</h4>
        <div class="pie-chart-container">
          <canvas id="wordsPieChart" width="250" height="250"></canvas>
          <div class="pie-legend" id="pieLegend"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toasté€šçŸ¥å®¹å™¨ -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="js/common.js"></script>
  <script src="js/user-center.js"></script>
  <script src="js/theme-toggle-button.js"></script>
  <script src="js/mobile-nav.js"></script>
</body>

</html>
