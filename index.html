<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI English Learning Assistant</title>

  <!-- PWA Meta æ ‡ç­¾ -->
  <meta name="theme-color" content="#667eea">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="AIè‹±è¯­å­¦ä¹ ">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png">
  <link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png">
  <link rel="apple-touch-icon" sizes="128x128" href="/icons/icon-128x128.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png">
  <link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png">
  <link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png">
  <link rel="icon" href="/icons/icon.png" type="image/png">
  <link rel="icon" type="image/svg+xml" href="/icons/icon.svg">

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/themes.css">
  <!-- PJAX å¹³æ»‘é¡µé¢åˆ‡æ¢ - å·²æš‚åœ -->
  <!-- <script src="js/pjax.js"></script> -->
  <style>
    .container {
      max-width: 800px;
    }

    .mode-selection {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      margin: 3rem 0;
      justify-content: center;
    }

    .mode-card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      padding: 2rem;
      width: 300px;
      text-align: center;
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
      position: relative;
      cursor: pointer;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 280px;
    }

    .mode-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
      border-color: var(--primary);
    }

    .mode-card h3 {
      color: var(--primary);
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .mode-card p {
      color: #4b5563;
      margin-bottom: 1.5rem;
      flex-grow: 1;
    }

    .mode-card .btn {
      margin-top: auto;
    }

    .mode-card .icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--secondary);
    }

    .mode-card-content {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .user-info {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      padding: 1.5rem;
      margin-bottom: 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1px solid #e2e8f0;
    }

    .user-stats {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
    }

    .stat-label {
      font-size: 0.85rem;
      color: #64748b;
      margin-top: 0.25rem;
    }

    .theme-toggle {
      padding: 0.5rem 1rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--border-radius-sm);
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .theme-toggle:hover {
      background: var(--secondary);
      transform: translateY(-2px);
    }

    .quick-actions {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .quick-action-btn {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: var(--border-radius-sm);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
      text-decoration: none;
      display: inline-block;
    }

    .quick-action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(79, 70, 229, 0.3);
    }

    .admin-link {
      display: block;
      text-align: center;
      margin-top: 2rem;
      color: #6b7280;
      text-decoration: none;
      font-size: 0.9rem;
      transition: color 0.2s;
    }

    .admin-link:hover {
      color: var(--primary);
    }

    /* ç§»åŠ¨ç«¯é€‚é… */
    @media (max-width: 640px) {
      .header h1 {
        font-size: 1.85rem;
        line-height: 1.15;
      }

      .header p {
        font-size: 0.95rem;
      }

      .user-info {
        padding: 1rem;
        margin-bottom: 1.25rem;
        align-items: flex-start;
      }

      .user-stats {
        gap: 1rem;
      }

      .stat-item {
        min-width: 72px;
      }

      .stat-value {
        font-size: 1.25rem;
        line-height: 1.1;
      }

      .stat-label {
        font-size: 0.8rem;
      }

      .mode-selection {
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        margin: 1.5rem 0;
      }

      .mode-card {
        width: 100%;
        max-width: 320px;
        padding: 1.25rem;
        min-height: 220px;
      }

      .mode-card h3 {
        font-size: 1.25rem;
        margin-bottom: 0.6rem;
      }

      .mode-card p {
        font-size: 0.95rem;
        margin-bottom: 1rem;
        line-height: 1.5;
      }

      .mode-card .icon {
        font-size: 2.25rem;
        margin-bottom: 0.5rem;
      }

      .mode-card .btn {
        min-height: 44px;
        padding: 0.7rem 1rem;
      }

      .quick-actions {
        margin-top: 1.25rem;
        gap: 0.75rem;
      }

      .quick-action-btn {
        padding: 0.7rem 1.1rem;
        font-size: 0.95rem;
      }

      .admin-link {
        margin-top: 1.25rem;
      }
    }

    @media (max-width: 380px) {
      .mode-card {
        max-width: 100%;
      }

      .user-stats {
        justify-content: space-between;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>AI English Learning Assistant</h1>
      <p>é€‰æ‹©å­¦ä¹ æ¨¡å¼å¼€å§‹ç»ƒä¹ </p>
    </div>

    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <div class="user-info">
      <div class="user-stats">
        <div class="stat-item">
          <div class="stat-value" id="userLevel">1</div>
          <div class="stat-label">ğŸ† ç­‰çº§</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="userCoins">0</div>
          <div class="stat-label">ğŸ’° é‡‘å¸</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="userStreak">0</div>
          <div class="stat-label">ğŸ”¥ è¿ç»­å¤©æ•°</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="userWords">0</div>
          <div class="stat-label">ğŸ“š ç´¯è®¡å•è¯</div>
        </div>
      </div>
    </div>

    <div class="mode-selection">
      <div class="mode-card" onclick="location.href='context.html'">
        <div class="mode-card-content">
          <div class="icon">ğŸ“š</div>
          <h3>ä¸Šä¸‹æ–‡çŒœè¯</h3>
          <p>æ ¹æ®è‹±è¯­ä¸Šä¸‹æ–‡çŒœæµ‹å•è¯çš„ä¸­æ–‡å«ä¹‰ï¼Œæé«˜è¯æ±‡ç†è§£èƒ½åŠ›</p>
          <a href="context.html" class="btn">å¼€å§‹ç»ƒä¹ </a>
        </div>
      </div>

      <div class="mode-card" onclick="location.href='blank.html'">
        <div class="mode-card-content">
          <div class="icon">ğŸ”</div>
          <h3>å¡«ç©ºç»ƒä¹ </h3>
          <p>æ ¹æ®å¥å­ä¸Šä¸‹æ–‡å¡«å…¥æ­£ç¡®çš„å•è¯ï¼Œå·©å›ºå•è¯æ‹¼å†™å’Œä½¿ç”¨</p>
          <a href="blank.html" class="btn">å¼€å§‹ç»ƒä¹ </a>
        </div>
      </div>

      <div class="mode-card" onclick="location.href='mix.html'">
        <div class="mode-card-content">
          <div class="icon">ğŸ²</div>
          <h3>æ··åˆæ¨¡å¼</h3>
          <p>èåˆå¤šç§ç»ƒä¹ æ–¹å¼ï¼ŒéšæœºæŒ‘æˆ˜ï¼Œå…¨é¢æå‡è‹±è¯­èƒ½åŠ›</p>
          <a href="mix.html" class="btn">å¼€å§‹ç»ƒä¹ </a>
        </div>
      </div>

      <div class="mode-card" onclick="location.href='ranked.html'" style="border-color: #f59e0b;">
        <div class="mode-card-content">
          <div class="icon">âš”ï¸</div>
          <h3>æ’ä½èµ›</h3>
          <p>ä¸å…¶ä»–ç©å®¶ä¸€è¾ƒé«˜ä¸‹ï¼Œäº‰å¤ºèµ›å­£è£è€€ï¼Œèµ¢å–ä¸°åšå¥–åŠ±</p>
          <a href="ranked.html" class="btn" style="background: linear-gradient(90deg, #f59e0b, #d97706);">å¼€å§‹æ¯”èµ›</a>
        </div>
      </div>
    </div>

    <a href="admin.html" class="admin-link">é«˜çº§æ•°æ®ç®¡ç†</a>
  </div>

  <script src="js/common.js"></script>
  <script>
    // åœ¨ä¸»é¡µé¢åˆå§‹åŒ–å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®å·²å‡†å¤‡å¥½ä¾›å…¶ä»–é¡µé¢ä½¿ç”¨
    initializeStorage();
    initializeUserProfile();
    initializeTheme();
    updateStreak();
    initDeveloperMode(); // åˆå§‹åŒ–å¼€å‘è€…æ¨¡å¼

    // æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
    function updateUserDisplay() {
      const profile = getUserProfile();
      document.getElementById('userLevel').textContent = profile.level;
      document.getElementById('userCoins').textContent = profile.coins;
      document.getElementById('userStreak').textContent = profile.streak;
      document.getElementById('userWords').textContent = profile.totalWordsLearned;
    }

    updateUserDisplay();
  </script>

  <!-- Toasté€šçŸ¥å®¹å™¨ -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
  <script src="js/theme-toggle-button.js"></script>

  <!-- ç§»åŠ¨ç«¯å¯¼èˆªæ  -->
  <script src="js/mobile-nav.js"></script>

  <!-- Service Worker æ³¨å†Œ -->
  <script src="js/sw-register.js"></script>
</body>

</html>